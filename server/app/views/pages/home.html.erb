<div class="container text-center">
  <h1>Bem-vindo ao Sistema de Abrigos de Animais</h1>
  <p>Encontre um abrigo perto de você ou cadastre-se para gerenciar o seu abrigo de animais.</p>

  <!-- Formulário de busca de abrigos -->
  <div class="row justify-content-center mt-4">
    <div class="col-md-6">
      <h3>Buscar Abrigos</h3>
      <div class="search-forms">
        <div>
          <h2>Buscar por Nome</h2>
          <%= form_with url: search_shelters_path, method: :get, local: true do %>
            <div class="form-group">
              <label for="name">Nome do Abrigo:</label>
              <%= text_field_tag :name, params[:name], placeholder: "Digite o nome do abrigo", class: "form-control" %>
            </div>
            <%= submit_tag "Buscar", class: "btn btn-primary" %>
          <% end %>
        </div>

        <div>
          <h2>Buscar por Cidade</h2>
          <%= form_with url: search_shelters_path, method: :get, local: true do %>
            <div class="form-group">
              <label for="city">Cidade:</label>
              <%= text_field_tag :city, params[:city], placeholder: "Digite o nome da cidade", class: "form-control" %>
            </div>
            <%= submit_tag "Buscar", class: "btn btn-primary" %>
          <% end %>
        </div>

        <div>
          <h2>Buscar por Nome do Animal</h2>
          <%= form_with url: search_pets_path, method: :get, local: true do %>
            <div class="form-group">
              <label for="animal_name">Nome do Animal:</label>
              <%= text_field_tag :name, params[:name], placeholder: "Digite o nome do animal", class: "form-control" %>
            </div>
            <%= submit_tag "Buscar", class: "btn btn-primary" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- Ações principais -->
  <div class="row mt-5">
    <div class="col-md-4">
      <h3>Lista de Abrigos</h3>
      <p>Veja a lista de todos os abrigos disponíveis no sistema.</p>
      <%= link_to 'Ver Abrigos', shelters_path, class: 'btn btn-secondary' %>
    </div>

    <% if user_signed_in? %>
      <% if current_user.role == 'gestor' %>
        <!-- Usuário logado e com role 'gestor': opção para registrar novo abrigo -->
        <div class="col-md-4">
          <h3>Registrar Novo Abrigo</h3>
          <p>Cadastre um novo abrigo e comece a gerenciá-lo.</p>
          <%= link_to 'Registrar Abrigo', new_shelter_path, class: 'btn btn-success' %>
          <%= link_to 'Sair', destroy_user_session_path, method: :delete, class: 'btn btn-danger', data: { confirm: 'Tem certeza que deseja sair?' } %>
        </div>
      <% else %>
        <!-- Usuário logado, mas não com role 'gestor': mostrar mensagem de falta de permissão -->
        <div class="col-md-4">
          <h3>Registrar Novo Abrigo</h3>
          <p>Você não tem permissão para registrar um novo abrigo.</p>
          <%= link_to 'Sair', destroy_user_session_path, method: :delete, class: 'btn btn-danger', data: { confirm: 'Tem certeza que deseja sair?' } %>
        </div>
      <% end %>
    <% else %>
      <!-- Usuário não logado: opções de cadastro e login -->
      <div class="col-md-4">
        <h3>Cadastrar-se</h3>
        <p>Crie uma conta para gerenciar seu próprio abrigo.</p>
        <%= link_to 'Cadastrar-se', new_user_registration_path, class: 'btn btn-success' %>
      </div>

      <div class="col-md-4">
        <h3>Fazer Login</h3>
        <p>Já possui uma conta? Faça login aqui.</p>
        <%= link_to 'Fazer Login', new_user_session_path, class: 'btn btn-primary' %>
      </div>
    <% end %>
  </div>
</div>
